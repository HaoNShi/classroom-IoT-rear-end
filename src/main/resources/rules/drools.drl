import org.nju.iot.model.DroolsEntity
import org.nju.iot.form.DeviceTestForm

rule "关闭设备"
    salience 10
    no-loop true
    when
        DroolsEntity(id.equals("1"))
        $device:DeviceTestForm()
    then
        $device.setOpenState(0);
        drools.halt();
end

rule "日间上课"
    salience 10
    no-loop true
    when
        DroolsEntity(id.equals("2"))
        $device:DeviceTestForm()
    then
        int type = $device.getDeviceType();
        // 0:灯, 1:空调, 2:投影仪
        if (type == 0) {
            $device.setOpenState(0);
        } else if(type == 1) {
            $device.setOpenState(0);
        } else if(type == 2) {
            $device.setOpenState(1);
        }
        drools.halt();
end